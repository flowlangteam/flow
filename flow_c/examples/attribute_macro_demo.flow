// Demo of Flow language attributes and macros

// Define a macro to increment a value
##func INCREMENT(x: i64) -> i64 {
    x + 1
}

// Define a macro to double a value  
##func DOUBLE(x: i64) -> i64 {
    x * 2
}

// Regular function with attribute
#[inline]
func add(a: i64, b: i64) -> i64 {
    a + b
}

// Regular function with multiple attributes
#[inline]
#[optimize]
func multiply(a: i64, b: i64) -> i64 {
    a * b
}

// Struct with attribute
#[repr(C)]
struct Point {
    x: i64,
    y: i64
}

func main() -> i64 {
    // Use macros - these expand at parse time
    let a: i64 = $INCREMENT(41);  // Expands to: 41 + 1 = 42
    let b: i64 = $DOUBLE(21);     // Expands to: 21 * 2 = 42
    
    // Use regular functions
    let c: i64 = add(40, 2);
    let d: i64 = multiply(6, 7);
    
    // Combine macro and function calls
    let result: i64 = add($INCREMENT(20), $DOUBLE(10));  // add(21, 20) = 41
    
    result
}
